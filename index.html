<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Causeve Technologies LLP ‚Äì Firmware, IoT, Cloud, AI/ML</title>
  <meta name="description" content="Causeve Technologies LLP ‚Äì Reliable technology partner for Firmware Development, IoT integration, Cloud integration with AI/ML. Product Engineering, Digital Engineering, and a portfolio of real-world IoT solutions." />

  <link rel="icon" type="image/svg+xml" href="./causeve-logo.svg" />
  <link rel="alternate icon" type="image/png" href="./CAUSEVE logo-1.png" />
  <link rel="preload" as="image" href="CAUSEVE logo-1.png" fetchpriority="high" />

  <meta property="og:title" content="Causeve Technologies LLP" />
  <meta property="og:description" content="Reliable partner for Firmware, IoT, Cloud, and AI/ML." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://causeve.example" />
  <meta property="og:image" content="./assets/hero-poster.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="robots" content="noimageindex, noarchive" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg:#fff; --surface:#fafbfc; --card:#fff; --card-2:#f3f5f8;
      --text:#12151a; --muted:#5b6573; --muted-2:#7b8696; --border:#e5e9ef;
      --primary:#20b2aa; --primary-2:#48d1cc; --accent:#0f766e; --chip-bg:#e6fbf8;
      --shadow:0 10px 24px rgba(16,24,40,.06);
      --radius:16px; --radius-sm:12px; --maxw:1200px; --header-h:64px;
      --safe-top: env(safe-area-inset-top);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;scroll-behavior:smooth;background:var(--bg);color:var(--text)}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;padding-top:calc(var(--header-h) + var(--safe-top,0px))}
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}
    img{max-width:100%;display:block}
    /* Deter copying/dragging */
    .no-select, .no-select *:not(input):not(textarea){
      -webkit-user-select:none; user-select:none; -ms-user-select:none; -webkit-touch-callout:none;
    }
    img, img.thumb{ -webkit-user-drag: none; }
    /* Devtools guard overlay */
    #devtoolsGuard{
      position:fixed; inset:0; background:rgba(15,23,42,.92); color:#e2e8f0;
      display:none; align-items:center; justify-content:center; z-index:9999;
      backdrop-filter: blur(4px);
    }
    #devtoolsGuard .inner{ max-width:800px; padding:22px; text-align:center }
    #devtoolsGuard h3{ margin:0 0 8px; font-size:1.25rem }
    body.guard-active{ overflow:hidden }

    /* Fixed header */
    header{
      position:fixed; top:0; left:0; right:0; z-index:50;
      background:rgba(255,255,255,.86);
      -webkit-backdrop-filter:saturate(160%) blur(8px);
      backdrop-filter:saturate(160%) blur(8px);
      border-bottom:1px solid var(--border);
    }
    header::after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:var(--mode-color, var(--accent));opacity:.35;pointer-events:none;transition:background-color .2s ease, opacity .2s ease}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.2px}
    .brand img.logo-header{height:clamp(44px,6vw,72px);width:auto;border-radius:14px}
    .menu{display:flex;align-items:center;gap:4px;position:relative}
    .menu li{list-style:none}
    .menu a{padding:12px 14px;border-radius:12px;font-weight:600;border:1px solid transparent;display:inline-block;position:relative;z-index:1;transition:background-color .2s ease}
    .menu a:hover{background:#f3f6f8}
    .active-link{background:var(--nav-bg) !important}
    .menu a.active-link:hover{background:var(--nav-bg) !important}
    .menu a.active-link::after{content:none}
    .nav-indicator{display:none}

    /* Mobile menu */
    .hamburger{display:none}
    .mobile-panel{display:none}
    .scrim{display:none}
    @media (max-width:900px){
      .menu{display:none}
      .hamburger{display:inline-flex;align-items:center;gap:10px;border:1px solid var(--border);padding:12px 14px;border-radius:12px;background:#fff;font-weight:700}
      .mobile-panel{
        display:none; position:fixed; inset:calc(var(--header-h) + 12px) 12px auto 12px;
        background:var(--card); border:1px solid var(--border); border-radius:18px; padding:12px; box-shadow:var(--shadow); z-index:60;
      }
      .mobile-panel.open{display:block}
      .nav-indicator{display:none}
      .mobile-links a{display:block;padding:14px 12px;border-radius:12px;font-weight:600}
      .mobile-links a:hover{background:#eef2f6}
      .mobile-section{padding:10px 8px;border-radius:12px;background:var(--card-2);margin:10px 0}
      .mobile-section h4{margin:6px 8px 8px;font-size:1rem;color:var(--muted)}

      /* Scrim behind mobile panel */
      .scrim{display:none; position:fixed; inset:0; background:rgba(15,23,42,.28); z-index:55}
      .scrim.open{display:block}
    }

    /* Hero (acts like a tabbed surface) */
    .hero{position:relative;min-height:100svh;padding:110px 0 48px;overflow:hidden}
    .hero::after{content:"";position:absolute;inset:0;z-index:1;background:
        radial-gradient(1200px 600px at 70% 10%, rgba(32,178,170,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.26), rgba(255,255,255,.64))}
    /* Remove the decorative "picture" orb behind hero */
    .bg-orb{display:none !important}
    .hero-inner{position:relative;z-index:2;text-align:center}
    .hero .lead{display:inline-block;padding:6px 12px;border-radius:999px;border:1px solid var(--border);background:var(--surface);font-weight:600;color:var(--accent)}
    .hero h1{margin:14px 0 10px;font-size:clamp(24px,5.6vw,46px);line-height:1.12;letter-spacing:-.3px}
    .hero h1 .grad{background:linear-gradient(90deg,var(--primary),var(--accent));-webkit-background-clip:text;background-clip:text;color:transparent}
    .hero p{margin:0;color:var(--muted);font-size:clamp(13px,3.2vw,17px)}
    .cta{display:flex;gap:10px;margin-top:16px;justify-content:center;flex-wrap:wrap}
    /* Smooth swap for hero header/content */
    .hero-inner, .hero-content{transition:opacity .2s ease, transform .2s ease; will-change:opacity, transform}
    .fade-out{opacity:0 !important; transform:translateY(12px)}
    .btn{padding:12px 14px;border-radius:12px;border:1px solid var(--border);font-weight:700}
    .btn.primary{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#05343a;border-color:transparent;box-shadow:0 8px 16px rgba(15,118,110,.16)}
    .btn.ghost{background:#fff;color:var(--text)}

    .hero-canvas{position:absolute;inset:0;width:100%;height:100%;display:block;z-index:0}

    /* Tabs content area */
    .hero-content{position:relative;z-index:2;margin-top:14px}

    /* === ABOUT-COMPACT MODE === */
    .hero.about-compact{padding-top:88px;padding-bottom:24px;min-height:100svh}
    .hero.about-compact .lead{padding:4px 10px;font-size:.85rem}
    .hero.about-compact h1{margin:10px 0 6px;font-size:clamp(20px,4.2vw,38px)}
    .hero.about-compact p{font-size:clamp(12px,2.4vw,15px)}
    .hero.about-compact .cta{display:none}
    .hero.about-compact .tabs-note{display:none}
    .hero.about-compact .hero-content{margin-top:8px}

    :root{
      --about-bg:#0b0f1a; --about-surface:#141a28; --about-border:#223047;
      --about-text:#e2e8f0; --about-muted:#a0aec0; --about-accent:#20b2aa;
      --about-glow:rgba(32,178,170,0.25); --about-shadow:rgba(0,0,0,0.35);
    }
    /* Mode color mapping (used by header accent and nav underline) */
    :root{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    html.mode-home{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    html.mode-product{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    html.mode-digital{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    html.mode-about{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    html.mode-portfolio{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    html.mode-contact{ --mode-color:#19B5BD; --nav-bg: rgba(25,181,189,.38); }
    .about-tabs-container{
      max-width:900px;margin:0 auto;padding:14px 14px 12px;
      background:var(--about-bg);border-radius:14px;
      box-shadow:0 18px 36px var(--about-shadow);border:1px solid var(--about-border);
      /* Ensure the box fits inside the hero viewport */
      max-height:calc(100svh - var(--header-h) - 180px);
      overflow:auto;
    }
    .about-tabs{
      display:flex;gap:6px;margin-bottom:10px;flex-wrap:wrap;justify-content:center;
    }
    .about-tab{
      background:var(--about-surface);border:1px solid var(--about-border);
      color:var(--about-muted);padding:9px 12px;border-radius:10px;font-weight:600;
      font-size:0.82rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);
      position:relative;display:flex;align-items:center;gap:6px;min-width:92px;justify-content:center;
    }
    .about-tab:hover{
      background:rgba(32,178,170,0.10);color:var(--about-text);transform:translateY(-2px);
      box-shadow:0 6px 18px var(--about-glow);border-color:var(--about-accent);
    }
    .about-tab.active{
      background:linear-gradient(135deg,var(--about-accent),#48d1cc);
      color:white;border-color:var(--about-accent);box-shadow:0 8px 20px var(--about-glow);
      transform:translateY(-2px);
    }
    .about-tab.active::before{
      content:"";position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);
      width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;
      border-top:7px solid var(--about-accent);
    }
    .tab-icon{font-size:.95rem;opacity:.85}
    .tab-label{font-weight:600}
    .about-content{
      background:var(--about-surface);border-radius:12px;padding:14px;
      box-shadow:0 8px 20px var(--about-shadow);backdrop-filter:blur(12px);
      border:1px solid var(--about-border);min-height:0;position:relative;
      transition:opacity .2s ease, transform .2s ease; will-change:opacity, transform
    }
    .about-panel{display:none;animation:fadeInUp .3s cubic-bezier(.4,0,.2,1)}
    .about-panel.active{display:block}
    .about-panel h3{
      font-size:1.25rem;font-weight:700;margin:0 0 8px 0;
      background:linear-gradient(135deg,var(--about-text),var(--about-accent));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .about-panel p{font-size:.92rem;line-height:1.55;color:var(--about-muted);margin:0 0 8px 0}
    .about-panel ul{list-style:none;padding:0;margin:0}
    .about-panel li{
      padding:6px 0;color:var(--about-muted);position:relative;padding-left:20px;
      font-size:.92rem;line-height:1.5;
    }
    .about-panel li::before{
      content:"‚ñ∂";color:var(--about-accent);font-size:.75rem;position:absolute;left:0;top:7px;
    }

    .tech-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(86px,1fr));gap:6px;margin-top:8px}
    .tech-chip{
      background:linear-gradient(135deg,var(--about-accent),#48d1cc);
      color:white;padding:7px 9px;border-radius:8px;text-align:center;
      font-size:.78rem;font-weight:600;transition:all .2s ease;
      box-shadow:0 3px 10px rgba(32,178,170,0.18);
    }
    .tech-chip:hover{transform:translateY(-2px);box-shadow:0 6px 14px var(--about-glow)}

    .about-footer{display:none}

    @keyframes fadeInUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

    @media (max-width:768px){
      .hero.about-compact{padding-top:82px;padding-bottom:18px}
      .about-tabs-container{padding:12px;max-width:94vw;max-height:calc(100svh - var(--header-h) - 150px)}
      .about-tabs{gap:4px;margin-bottom:8px;justify-content:flex-start;overflow-x:auto;padding-bottom:4px}
      .about-tab{padding:7px 10px;font-size:.78rem;min-width:84px}
      .about-content{padding:12px;border-radius:10px}
      .tech-grid{grid-template-columns:repeat(auto-fit,minmax(78px,1fr));gap:6px}
      .about-panel h3{font-size:1.1rem}
      .about-panel p,.about-panel li{font-size:.88rem}
    }

    .tabs-note{margin:8px auto 0;text-align:center;color:var(--muted);font-size:.9rem}

    .grid{display:grid;gap:14px}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    .grid.cols-2{grid-template-columns:repeat(2,1fr)}
    @media (max-width:980px){.grid.cols-3{grid-template-columns:1fr 1fr}}
    @media (max-width:700px){.grid.cols-3,.grid.cols-2{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);position:relative;overflow:hidden}
    .card .kicker{display:inline-flex;align-items:center;gap:8px;color:var(--accent);font-weight:700;font-size:.92rem}
    .card p{margin:0;color:var(--muted)}
    .chip{display:inline-block;margin-top:10px;padding:8px 12px;border-radius:999px;background:var(--chip-bg);font-size:.85rem}
    .card img.thumb{width:100%;height:auto;border-radius:12px;margin-bottom:10px;display:block;object-fit:cover;aspect-ratio:16/9;background:#f3f5f8}

    /* Contact + Footer */
    section{padding:44px 0}
    section h2{font-size:clamp(22px,5vw,32px);margin:0 0 14px}
    section p.section-tag{margin:0 0 18px;color:var(--muted)}
    .contact{background:var(--surface);border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
    .contact .wrap{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
    .contact .info{flex:1 1 360px;min-width:280px}
    .map-embed{flex:1 1 520px;min-height:320px;width:100%;border:0;border-radius:14px;box-shadow:var(--shadow)}
    @media (max-width:520px){ .map-embed{min-height:240px} }
    footer{margin-top:32px;border-top:1px solid var(--border);background:#fafafa}
    .foot{display:flex;align-items:center;justify-content:space-between;padding:20px 0;gap:12px;flex-wrap:wrap}
    .foot small{color:var(--muted-2)}

    /* Anchor offset for fixed header */
    .anchor{scroll-margin-top:calc(var(--header-h) + 8px)}

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      .hero{background:linear-gradient(180deg, #eef9f7, #e3f4f2)}
      .hero-canvas{display:none}
      .hero-inner, .hero-content{transition:none !important}
      .about-content{transition:none !important}
    }
  </style>
</head>
<body class="no-select">
  <header>
    <div class="container nav">
      <a class="brand" href="#home" aria-label="Causeve Technologies LLP home">
        <img class="logo-header" src="CAUSEVE logo-1.png" alt="Causeve Technologies LLP"
             onerror="this.style.display='none'" loading="lazy" decoding="async"/>
      </a>

      <button id="hamburger" class="hamburger" aria-expanded="false" aria-controls="mobileNav" aria-label="Open menu">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        Menu
      </button>

      <!-- SIMPLE NAV -->
      <ul class="menu" role="menubar">
        <li><a href="#home" data-mode="home">Home</a></li>
        <li><a href="#product-engineering" data-mode="product">Product Engineering</a></li>
        <li><a href="#digital-engineering" data-mode="digital">Digital Engineering</a></li>
        <li><a href="#about" data-mode="about">About</a></li>
        <li><a href="#portfolio">Portfolio</a></li>
        <li><a href="#contact">Contact</a></li>
        <span id="navIndicator" class="nav-indicator" aria-hidden="true"></span>
      </ul>
    </div>

    <!-- Mobile nav -->
    <div id="mobileNav" class="mobile-panel" aria-hidden="true">
      <div class="mobile-section">
        <h4>Navigate</h4>
        <div class="mobile-links">
          <a href="#home" data-mode="home">Home</a>
          <a href="#product-engineering" data-mode="product">Product Engineering</a>
          <a href="#digital-engineering" data-mode="digital">Digital Engineering</a>
          <a href="#about" data-mode="about">About</a>
          <a href="#portfolio">Portfolio</a>
          <a href="#contact">Contact</a>
        </div>
      </div>
    </div>
    <div id="scrim" class="scrim" aria-hidden="true"></div>
  </header>

  <main id="home" class="hero anchor">
    <canvas id="heroCanvas" class="hero-canvas" aria-hidden="true"></canvas>

    <div class="container hero-inner" id="heroHeader">
      <span class="lead" id="heroLead">Reliable Technology Partner For</span>
      <h1 id="heroTitle">Firmware Development, IoT Integration, Cloud Integration with <span class="grad">AI &amp; ML</span></h1>
      <p id="heroSub">From embedded firmware to connected platforms and intelligent analytics, we deliver end-to-end, production-ready products built for reliability.</p>
      <div class="cta" id="heroCta">
        <a class="btn primary" href="#portfolio">View Portfolio</a>
        <a class="btn ghost" href="#contact">Contact Us</a>
      </div>
      <div class="tabs-note" id="tabsNote">Tip: Tap a top menu (Product / Digital / About) to view detail panels here.</div>
    </div>

    <!-- This is where tabbed content will render -->
    <div class="container hero-content" id="heroContent" aria-live="polite"></div>
  </main>

  <!-- TEMPLATES (rendered inside hero) -->
  <template id="tpl-product">
    <div class="grid cols-2">
      <article class="card">
        <span class="kicker">Firmware Engineering</span>
        <h3>MCUs, RTOS, BLE / Mesh, Drivers</h3>
        <p>nRF52/Zephyr/FreeRTOS, power profiling, OTA/DFU, sensors &amp; peripherals, production-ready build pipelines.</p>
        <span class="chip">C / C++ ¬∑ Zephyr ¬∑ FreeRTOS ¬∑ Wirepas ¬∑ BLE</span>
      </article>
      <article class="card">
        <span class="kicker">Connected Software Development</span>
        <h3>Gateways, APIs, Dashboards</h3>
        <p>Linux gateways, MQTT/HTTP pipelines, device provisioning, cloud integrations, admin portals, observability.</p>
        <span class="chip">Python ¬∑ Node ¬∑ Flask ¬∑ Docker ¬∑ Azure/AWS</span>
      </article>
    </div>
  </template>

  <template id="tpl-digital">
    <div class="grid cols-3">
      <article class="card">
        <span class="kicker">IoT</span>
        <h3>Device-to-Cloud Integrations</h3>
        <p>Secure provisioning, telemetry, rules &amp; alerts, digital twins, time-series storage, OTA orchestration.</p>
        <span class="chip">MQTT ¬∑ Azure IoT ¬∑ InfluxDB</span>
      </article>
      <article class="card">
        <span class="kicker">AI / ML</span>
        <h3>Insight &amp; Automation</h3>
        <p>Anomaly detection, predictive maintenance, classification &amp; forecasting on the edge and in the cloud.</p>
        <span class="chip">Python ¬∑ scikit-learn ¬∑ TinyML</span>
      </article>
      <article class="card">
        <span class="kicker">Web / Mobile Apps</span>
        <h3>Dashboards &amp; Control Apps</h3>
        <p>Modern web portals and native mobile apps to visualize, manage, and control your devices at scale.</p>
        <span class="chip">Flutter ¬∑ SwiftUI ¬∑ React</span>
      </article>
    </div>
  </template>

  <template id="tpl-about">
    <div class="about-tabs-container">
      <div class="about-tabs" role="tablist" aria-label="About sections">
        <button class="about-tab active" role="tab" aria-selected="true" aria-controls="overview-panel" data-tab="overview" id="overview-tab">
          <span class="tab-icon">üè¢</span>
          <span class="tab-label">Overview</span>
        </button>
        <button class="about-tab" role="tab" aria-selected="false" aria-controls="expertise-panel" data-tab="expertise" id="expertise-tab">
          <span class="tab-icon">‚ö°</span>
          <span class="tab-label">Expertise</span>
        </button>
        <button class="about-tab" role="tab" aria-selected="false" aria-controls="domains-panel" data-tab="domains" id="domains-tab">
          <span class="tab-icon">üåê</span>
          <span class="tab-label">Domains</span>
        </button>
        <button class="about-tab" role="tab" aria-selected="false" aria-controls="stack-panel" data-tab="stack" id="stack-tab">
          <span class="tab-icon">üíª</span>
          <span class="tab-label">Tech Stack</span>
        </button>
        <button class="about-tab" role="tab" aria-selected="false" aria-controls="highlights-panel" data-tab="highlights" id="highlights-tab">
          <span class="tab-icon">‚≠ê</span>
          <span class="tab-label">Highlights</span>
        </button>
      </div>
      
      <div class="about-content">
        <div class="about-panel active" id="overview-panel" role="tabpanel" aria-labelledby="overview-tab">
          <h3>About Causeve Technologies</h3>
          <p>Causeve Technologies turns ideas into production-ready hardware, firmware, gateways, and apps. We specialise in low-power BLE on nRF52, robust Linux gateways, and secure data pipelines with OTA/DFU, provisioning, and observability built in. From PoC to MVP to fleet rollout, we design for reliability, maintainability, and scale‚Äîso your product moves from lab to field without surprises.Our approach balances rapid prototyping with production discipline: versioned releases, testable builds, and maintainable architectures that scale from PoC to MVP to fleet rollouts.</p>
          <p>Founded in 2021 by Ilango Thavamani and Parthiban Balaraman. Ilango brings 10+ years in automotive embedded software development; Parthiban brings 12+ years in IoT devices and product design. Together they lead hands-on delivery across firmware, electronics, and cloud.</p>
        </div>
        
        <div class="about-panel" id="expertise-panel" role="tabpanel" aria-labelledby="expertise-tab">
          <h3>Our Expertise</h3>
          <ul>
            <li>End-to-end product delivery: firmware, electronics, gateways, cloud services, and modern apps</li>
            <li>OTA/DFU pipelines, device provisioning, secure identity, and fleet management</li>
            <li>Telemetry and observability with actionable dashboards and alerts</li>
            <li>Compliance-minded engineering and production-grade release processes</li>
          </ul>
        </div>
        
        <div class="about-panel" id="domains-panel" role="tabpanel" aria-labelledby="domains-tab">
          <h3>Application Domains</h3>
          <ul>
            <li>Fire extinguisher monitoring & asset localization</li>
            <li>BLE indoor navigation & attendance / workforce tracking</li>
            <li>Asset tracking and GNSS/RFID infrastructure monitoring</li>
            <li>Real-time ECG monitoring and connected health prototypes</li>
            <li>Aquaculture water-quality monitoring with low-power sensing</li>
          </ul>
        </div>
        
        <div class="about-panel" id="stack-panel" role="tabpanel" aria-labelledby="stack-tab">
          <h3>Technology Stack</h3>
          <p>nRF52 series, Zephyr / FreeRTOS, BLE, Mesh, and Wirepas Massive.</p>
          <p>Linux gateways with Docker & MQTT, secure OTA, and observability.</p>
          <p>Cloud integrations on Azure & AWS; services in Python & Node.</p>
          <p>Modern UIs in SwiftUI (iOS/iPadOS) and Flutter (cross-platform).</p>
          <div class="tech-grid">
            <span class="tech-chip">nRF52</span>
            <span class="tech-chip">Zephyr</span>
            <span class="tech-chip">FreeRTOS</span>
            <span class="tech-chip">BLE</span>
            <span class="tech-chip">Mesh</span>
            <span class="tech-chip">Wirepas</span>
            <span class="tech-chip">Docker</span>
            <span class="tech-chip">MQTT</span>
            <span class="tech-chip">Azure</span>
            <span class="tech-chip">AWS</span>
            <span class="tech-chip">Python</span>
            <span class="tech-chip">Node</span>
            <span class="tech-chip">SwiftUI</span>
            <span class="tech-chip">Flutter</span>
          </div>
        </div>
        
        <div class="about-panel" id="highlights-panel" role="tabpanel" aria-labelledby="highlights-tab">
          <h3>Key Highlights</h3>
          <ul>
            <li>From PoC to MVP to production: repeatable release pipelines with OTA + device provisioning</li>
            <li>Robust gateway layer on Linux with Docker, secure MQTT, and monitoring</li>
            <li>Clean, modern apps tailored for field teams and operators (SwiftUI, Flutter)</li>
          </ul>
        </div>
      </div>
    </div>
  </template>

  <!-- ONLY keep Portfolio + Contact as scrolling sections -->
  <section id="portfolio" class="container anchor">
    <h2>Portfolio</h2>
    <p class="section-tag">Selected solutions shipped and in development.</p>
    <div class="grid cols-3">
      <article class="card">
        <img class="thumb" src="asset/portfolio_img/Indoor_Navigation.png" data-alt-src="assets/portfolio_img/Indoor_Navigation.png" alt="Indoor Navigation & Attendance" loading="lazy" decoding="async" onerror="if(!this.dataset.triedAlt){this.dataset.triedAlt=1;this.src=this.dataset.altSrc;}else{this.style.display='none';}"/>
        <span class="kicker">Indoor Navigation &amp; Attendance</span>
        <h3>BLE-based Indoor Navigation &amp; Attendance System</h3>
        <p>Wayfinding and attendance tracking using beacons and mobile apps with privacy-aware design.</p>
      </article>
      <article class="card">
        <img class="thumb" src="asset/portfolio_img/Fire_extingusher.png" data-alt-src="assets/portfolio_img/Fire_extingusher.png" alt="Fire Extinguisher Monitoring" loading="lazy" decoding="async" onerror="if(!this.dataset.triedAlt){this.dataset.triedAlt=1;this.src=this.dataset.altSrc;}else{this.style.display='none';}"/>
        <span class="kicker">Fire Safety</span>
        <h3>Fire Extinguisher Monitoring</h3>
        <p>BLE tags + docking stations + gateway + dashboard for status, tamper, and maintenance alerts.</p>
      </article>
      <article class="card">
        <img class="thumb" src="asset/portfolio_img/Gun_Point_Tracking.png" data-alt-src="assets/portfolio_img/Gun_Point_Tracking.png" alt="Gun Point Tracking" loading="lazy" decoding="async" onerror="if(!this.dataset.triedAlt){this.dataset.triedAlt=1;this.src=this.dataset.altSrc;}else{this.style.display='none';}"/>
        <span class="kicker">Asset Tracking</span>
        <h3>Gun Point Tracking</h3>
        <p>High-reliability tracking with audit logs and zone-based alerts for sensitive assets.</p>
      </article>
      <article class="card">
        <img class="thumb" src="asset/portfolio_img/GNSS_RFID_Infra_Monitoring.png" data-alt-src="assets/portfolio_img/GNSS_RFID_Infra_Monitoring.png" alt="GNSS / RFID Infrastructure Monitoring" loading="lazy" decoding="async" onerror="if(!this.dataset.triedAlt){this.dataset.triedAlt=1;this.src=this.dataset.altSrc;}else{this.style.display='none';}"/>
        <span class="kicker">Infrastructure</span>
        <h3>GNSS / RFID-based Infrastructure Monitoring</h3>
        <p>Hybrid GNSS + RFID to monitor critical assets and maintenance events across large sites.</p>
      </article>
      <article class="card">
        <img class="thumb" src="asset/portfolio_img/ECG_Real_time.png" data-alt-src="assets/portfolio_img/ECG_Real_time.png" alt="ECG Real-time Continuous Monitoring" loading="lazy" decoding="async" onerror="if(!this.dataset.triedAlt){this.dataset.triedAlt=1;this.src=this.dataset.altSrc;}else{this.style.display='none';}"/>
        <span class="kicker">Healthcare</span>
        <h3>ECG Real-time Continuous Monitoring</h3>
        <p>Continuous ECG streaming with early-detection models and clinician dashboards.</p>
      </article>
      <article class="card">
        <img class="thumb" src="asset/portfolio_img/Aquarium_Health.png" data-alt-src="assets/portfolio_img/Aquarium_Health.png" alt="Aquarium Health Monitoring" loading="lazy" decoding="async" onerror="if(!this.dataset.triedAlt){this.dataset.triedAlt=1;this.src=this.dataset.altSrc;}else{this.style.display='none';}"/>
        <span class="kicker">Aquaculture</span>
        <h3>Aquarium Health Monitoring</h3>
        <p>Sensor-based water-quality monitoring with alerting and guided remediation playbooks.</p>
      </article>
    </div>
  </section>

  <section id="contact" class="contact anchor">
    <div class="container wrap">
      <div class="info">
        <h3>Let‚Äôs build something reliable together</h3>
        <p class="section-tag">Tell us about your firmware, IoT, or cloud project and we‚Äôll get back within 1 business day.</p>

        <h4 style="margin:12px 0 6px">Company Address</h4>
        <address style="font-style:normal;line-height:1.5">
          RR Tower IV,<br>Thiru Vi Ka Industrial Estate,<br>SIDCO Industrial Estate, Guindy<br>
          Chennai 600032, IN
        </address>

        <div class="cta">
          <a class="btn primary" href="mailto:inquiries@causeve.com">Email: inquiries@causeve.com</a>
          <a class="btn ghost" href="https://wa.me/919962122876" target="_blank" rel="noopener noreferrer">WhatsApp</a>
          <a class="btn ghost" href="https://www.google.com/maps/dir/?api=1&destination=13.014417,80.211611" target="_blank" rel="noopener noreferrer">Get Directions</a>
        </div>
      </div>

      <iframe class="map-embed" title="Causeve Technologies LLP ‚Äî Map"
              src="https://www.google.com/maps?q=13.014417,80.211611&z=16&output=embed"
              loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </section>

  <footer>
    <div class="container foot">
      <small>¬© <span id="year"></span> Causeve Technologies LLP ‚Äî All rights reserved.</small>
      <small>Made with ‚ô• for firmware, IoT, cloud &amp; AI/ML.</small>
    </div>
  </footer>
  <div id="devtoolsGuard" aria-hidden="true">
    <div class="inner">
      <h3>Developer tools are disabled on this site</h3>
      <p>For security reasons, developer tools and keyboard shortcuts are blocked here.</p>
    </div>
  </div>

  <script>
    // Light client-side deterrents against copying/downloading
    (function(){
      // TEMP: disable guard
      //return;
      function isEditable(el){ return el && (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.isContentEditable); }
      document.addEventListener('contextmenu', (e)=>{ if (!isEditable(e.target)) e.preventDefault(); }, {capture:true});
      document.addEventListener('dragstart', (e)=>{ if (e.target && e.target.tagName === 'IMG') e.preventDefault(); });
      document.addEventListener('copy', (e)=>{ if (!isEditable(e.target)) e.preventDefault(); });
      document.addEventListener('keydown', (e)=>{
        if (isEditable(e.target)) return;
        const k = (e.key||'').toLowerCase();
        if ((e.ctrlKey||e.metaKey) && (k==='s' || k==='p' || k==='u' || k==='c' || k==='shift' || k==='i' || k==='j')) { e.preventDefault(); }
        if ((e.ctrlKey||e.metaKey) && e.shiftKey && (k==='i' || k==='j' || k==='c')) { e.preventDefault(); }
        if (k==='f12') { e.preventDefault(); }
      });
      // crude devtools detection (layout size jump when devtools docked)
      let guardShown = false;
      function showGuard(){ if(guardShown) return; guardShown=true; document.body.classList.add('guard-active'); const g=document.getElementById('devtoolsGuard'); if(g) g.style.display='flex'; }
      function hideGuard(){ if(!guardShown) return; guardShown=false; document.body.classList.remove('guard-active'); const g=document.getElementById('devtoolsGuard'); if(g) g.style.display='none'; }
      function detect(){
        const thresh = 140;
        const wDiff = Math.abs(window.outerWidth - window.innerWidth);
        const hDiff = Math.abs(window.outerHeight - window.innerHeight);
        //if (wDiff > thresh || hDiff > thresh) showGuard(); else hideGuard();
      }
      detect();
      window.addEventListener('resize', detect);
      // also poll occasionally in case of undetected open
      setInterval(detect, 1200);
    })();
  </script>

  <script>
    // Helpers
    const qs = (s, r=document) => r.querySelector(s);
    const qsa = (s, r=document) => Array.from(r.querySelectorAll(s));

    // Header height -> CSS var (in case logo size changes)
    const setHeaderOffset = () => {
      const h = (qs('header')?.offsetHeight) || 64;
      document.documentElement.style.setProperty('--header-h', h + 'px');
    };
    setHeaderOffset();
    addEventListener('resize', setHeaderOffset);
    addEventListener('orientationchange', setHeaderOffset);

    // Mobile nav
    const hamburger = qs('#hamburger');
    const panel = qs('#mobileNav');
    const scrim = qs('#scrim');
    function toggleMobile(open) {
      const willOpen = (open ?? !panel.classList.contains('open'));
      panel.classList.toggle('open', willOpen);
      scrim.classList.toggle('open', willOpen);
      hamburger.setAttribute('aria-expanded', String(willOpen));
      panel.setAttribute('aria-hidden', String(!willOpen));
      scrim.setAttribute('aria-hidden', String(!willOpen));
      document.body.style.overflow = willOpen ? 'hidden' : '';
    }
    hamburger?.addEventListener('click', () => toggleMobile());
    scrim?.addEventListener('click', () => toggleMobile(false));
    qsa('#mobileNav a, .menu a').forEach(a => a.addEventListener('click', () => toggleMobile(false)));

    // Year
    qs('#year').textContent = new Date().getFullYear();

    // About tabs functionality with deep linking
    function initAboutTabs() {
      const tabs = qsa('.about-tab');
      const panels = qsa('.about-panel');
      const container = qs('.about-content');
      
      function switchTab(targetTab) {
        const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const doSwap = () => {
          tabs.forEach(t => {
            t.classList.remove('active');
            t.setAttribute('aria-selected', 'false');
          });
          panels.forEach(p => p.classList.remove('active'));
          const tab = qs(`[data-tab="${targetTab}"]`);
          const panel = qs(`#${targetTab}-panel`);
          if (tab && panel) {
            tab.classList.add('active');
            tab.setAttribute('aria-selected', 'true');
            panel.classList.add('active');
            history.pushState(null, null, `#${targetTab}`);
          }
        };

        if (!container || reduce) { doSwap(); return; }
        container.classList.add('fade-out');
        setTimeout(()=>{
          doSwap();
          container.classList.remove('fade-out');
        }, 200);
      }
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const targetTab = tab.getAttribute('data-tab');
          switchTab(targetTab);
        });
      });
      
      const hash = window.location.hash.replace('#', '');
      const validTabs = ['overview', 'expertise', 'domains', 'stack', 'highlights'];
      if (validTabs.includes(hash)) {
        switchTab(hash);
      }
      
      window.addEventListener('hashchange', () => {
        const newHash = window.location.hash.replace('#', '');
        if (validTabs.includes(newHash)) {
          switchTab(newHash);
        }
      });
    }
    
    // === HERO TABS (Home/Product/Digital/About rendered on the hero) ===
    const hero = qs('main.hero');
    const heroLead = qs('#heroLead');
    const heroTitle = qs('#heroTitle');
    const heroSub = qs('#heroSub');
    const heroCta = qs('#heroCta');
    const heroContent = qs('#heroContent');
    const tabsNote = qs('#tabsNote');
    const heroHeader = qs('#heroHeader');
    const htmlEl = document.documentElement;
    const navIndicator = qs('#navIndicator');
    const tplProduct = qs('#tpl-product');
    const tplDigital = qs('#tpl-digital');
    const tplAbout = qs('#tpl-about');
    let currentMode = 'home';

    const linkMap = new Map();
    qsa('.menu a, #mobileNav a').forEach(a => {
      const hash = a.getAttribute('href') || '';
      const key = (hash.replace('#','') || 'home');
      linkMap.set(key, a);
      a.addEventListener('click', (e) => {
        const m = a.getAttribute('data-mode');
        if (m === 'home' || m === 'product' || m === 'digital' || m === 'about') {
          e.preventDefault();
          setHeroMode(m);
          const h = (m==='home') ? 'home' : (m==='product' ? 'product-engineering' : (m==='digital' ? 'digital-engineering' : 'about'));
          history.pushState({mode:m}, '', '#'+h);
          requestAnimationFrame(()=>{
            const keyNow = (m==='home') ? 'home' : (m==='product' ? 'product-engineering' : (m==='digital' ? 'digital-engineering' : 'about'));
            setActiveMenu(keyNow);
          });
        }
      });
    });

    // Immediately reflect click on Portfolio/Contact links so background updates before scroll lands
    // (Reverted) no special pending state on clicks; scroll spy will update

    function setActiveMenu(key){
      qsa('.menu a').forEach(el => el.classList.remove('active-link'));
      const desktopLink = qs(`.menu a[href="#${key}"]`) || (key==='home' ? qs('.menu a[href="#home"]') : null);
      desktopLink?.classList.add('active-link');
      // update mode color class on <html>
      htmlEl.classList.remove('mode-home','mode-product','mode-digital','mode-about','mode-portfolio','mode-contact');
      const cls = key==='home' ? 'mode-home' :
                  key==='product-engineering' ? 'mode-product' :
                  key==='digital-engineering' ? 'mode-digital' :
                  key==='about' ? 'mode-about' :
                  key==='portfolio' ? 'mode-portfolio' :
                  key==='contact' ? 'mode-contact' : 'mode-home';
      htmlEl.classList.add(cls);
      // move nav indicator to the active link
      const active = linkMap.get(key);
      const menu = qs('ul.menu');
      if (navIndicator && active && menu) {
        const r = active.getBoundingClientRect();
        const mr = menu.getBoundingClientRect();
        const pad = 6;
        const left = r.left - mr.left - pad;
        const top = r.top - mr.top - pad;
        const width = r.width + pad*2;
        const height = r.height + pad*2;
        navIndicator.style.transform = `translate(${left}px, ${top}px)`;
        navIndicator.style.width = width + 'px';
        navIndicator.style.height = height + 'px';
      }
      // no separate tracker label; nav background indicates active page
    }

    function smoothSwap(container, updateFn){
      if (!container){ updateFn(); return; }
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduce){ updateFn(); return; }
      container.classList.add('fade-out');
      setTimeout(()=>{
        updateFn();
        container.classList.remove('fade-out');
      }, 200);
    }

    function setHeroMode(mode, opts = {}){
      // Reset compact mode first
      hero.classList.remove('about-compact');
      currentMode = mode;

      if (mode === 'home'){
        smoothSwap(heroHeader, ()=>{
          heroLead.textContent = 'Reliable Technology Partner For';
          heroTitle.innerHTML = 'Firmware Development, IoT Integration, Cloud Integration with <span class="grad">AI &amp; ML</span>';
          heroSub.textContent = 'From embedded firmware to connected platforms and intelligent analytics, we deliver end-to-end, production-ready products built for reliability.';
          heroCta.style.display = '';
          tabsNote.style.display = '';
        });
        smoothSwap(heroContent, ()=>{ heroContent.innerHTML = ''; });
        setActiveMenu('home');
      } else if (mode === 'product'){
        smoothSwap(heroHeader, ()=>{
          heroLead.textContent = 'Product Engineering';
          heroTitle.textContent = 'Hardware-Close Software that Connects Reliably and Updates Safely.';
          heroSub.textContent = 'Firmware, Drivers, and Connected Software that is maintainable and production-ready.';
          heroCta.style.display = '';
          heroCta.innerHTML = `<a class="btn primary" href="#portfolio">See Related Work</a>
                               <a class="btn ghost" href="#contact">Start a Project</a>`;
          tabsNote.style.display = 'none';
        });
        smoothSwap(heroContent, ()=>{
          heroContent.innerHTML = '';
          heroContent.appendChild(tplProduct.content.cloneNode(true));
        });
        setActiveMenu('product-engineering');
      } else if (mode === 'digital'){
        smoothSwap(heroHeader, ()=>{
          heroLead.textContent = 'Digital Engineering';
          heroTitle.textContent = 'From Device to Cloud to Apps,with Intelligence Built-in.';
          heroSub.textContent = 'IoT data pipelines, AI/ML insights, and modern apps that scale.';
          heroCta.style.display = '';
          heroCta.innerHTML = `<a class="btn primary" href="#portfolio">See Related Work</a>
                               <a class="btn ghost" href="#contact">Discuss Your Use Case</a>`;
          tabsNote.style.display = 'none';
        });
        smoothSwap(heroContent, ()=>{
          heroContent.innerHTML = '';
          heroContent.appendChild(tplDigital.content.cloneNode(true));
        });
        setActiveMenu('digital-engineering');
      } else if (mode === 'about'){
        hero.classList.add('about-compact'); // compact spacing & fonts
        smoothSwap(heroHeader, ()=>{
          heroLead.textContent = 'About Us';
          heroTitle.textContent = 'Engineering Reliable Connected Products Since 2021';
          heroSub.textContent = 'We build end-to-end embedded and wireless solutions across IoT and BLE.';
          heroCta.style.display = 'none';
          tabsNote.style.display = 'none';
        });
        smoothSwap(heroContent, ()=>{
          heroContent.innerHTML = '';
          if (tplAbout) {
            heroContent.appendChild(tplAbout.content.cloneNode(true));
            initAboutTabs();
          }
        });
        setActiveMenu('about');
      }

      hero.style.minHeight = '100svh';
      if (opts.scroll !== false) {
        window.scrollTo({ top: hero.offsetTop - (document.querySelector('header')?.offsetHeight || 0), behavior: 'auto' });
      }
    }

    // Initialize from hash or default to home
    function initFromHash(initial = false){
      const raw = location.hash;
      const hash = (raw && raw.length) ? raw.replace('#','') : (initial ? 'home' : '');
      if (hash === 'product-engineering') setHeroMode('product', {scroll:false});
      else if (hash === 'digital-engineering') setHeroMode('digital', {scroll:false});
      else if (hash === 'about' || hash === 'overview' || hash === 'expertise' || hash === 'domains' || hash === 'stack' || hash === 'highlights') {
        setHeroMode('about', {scroll:false});
      }
      else if (hash === 'home') setHeroMode('home', {scroll:false});
      else if (initial) setHeroMode('home', {scroll:false});
    }
    addEventListener('hashchange', () => { initFromHash(false); requestAnimationFrame(()=>{
      const raw = location.hash.replace('#','');
      const key = raw||'home';
      setActiveMenu(key);
    }); });
    initFromHash(true);
    // Ensure nav indicator is positioned on first paint
    requestAnimationFrame(()=>{
      const raw = location.hash.replace('#','') || 'home';
      const key = (raw==='product-engineering'||raw==='digital-engineering'||raw==='about'||raw==='home') ? raw : 'home';
      setActiveMenu(key);
    });

    // SCROLLSPY for only Portfolio + Contact sections (robust viewport check)
    (() => {
      const ids = ['portfolio','contact'];
      const sections = ids.map(id => ({ id, el: qs('#'+id) })).filter(s=>s.el);
      let spy;
      function headerH(){ return (qs('header')?.offsetHeight || 64); }
      let sectionPositions = [];
      function modeToKey(){
        return currentMode==='home' ? 'home' :
               currentMode==='product' ? 'product-engineering' :
               currentMode==='digital' ? 'digital-engineering' :
               'about';
      }

      function recomputeOffsets(){
        sectionPositions = sections.map(s=>({ id:s.id, top: s.el.getBoundingClientRect().top + window.scrollY }));
      }

      function setActiveByScroll(){
        const y = window.scrollY + headerH() + 4;
        let chosen = null;
        for (const sp of sectionPositions){
          if (y >= sp.top) chosen = sp.id;
        }
        if (chosen) setActiveMenu(chosen); else setActiveMenu(modeToKey());
      }

      function initSpy(){
        if (spy) sections.forEach(s => spy.unobserve(s.el));
        spy = new IntersectionObserver(()=>{ setActiveByScroll(); },{
          root:null, rootMargin:`-${headerH()+6}px 0px 0px 0px`,
          threshold:[0,0.2,0.4,0.6,0.8,1]
        });
        sections.forEach(s => spy.observe(s.el));
      }
      initSpy();
      let ticking=false;
      recomputeOffsets();
      function onScroll(){ if (!ticking){ ticking=true; requestAnimationFrame(()=>{ setActiveByScroll(); ticking=false; }); } }
      addEventListener('scroll', onScroll, { passive: true });
      addEventListener('resize', ()=>{ initSpy(); recomputeOffsets(); setActiveByScroll(); });
      setTimeout(()=>{ recomputeOffsets(); setActiveByScroll(); }, 0);
    })();

    // === Hero Canvas Animation (lighter) ===
    (() => {
      const canvas = document.getElementById('heroCanvas');
      if (!canvas) return;
      const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const ctx = canvas.getContext('2d', { alpha: true });

      const BASE = {
        SPEED: 1.45, DPR_CAP: 1.25, MAX_NODES: 760, MIN_NODES: 200, DENSITY_DIV: 42000,
        MAX_DIST_MIN: 120, MAX_DIST_MAX: 190, LINE_ALPHA_MAX: 0.24, LINE_W_MIN: 1.2, LINE_W_GAIN: 1.1,
        NODE_R: 4.8, NODE_FILL: 'rgba(20,160,150,1)', NODE_STROKE: 'rgba(255,255,255,0.95)', NODE_STROKE_W: 2.1
      };
      const MOBILE = {
        SPEED: 1.0, DPR_CAP: 1.0, MAX_NODES: 400, MIN_NODES: 120, DENSITY_DIV: 52000,
        MAX_DIST_MIN: 100, MAX_DIST_MAX: 160, LINE_ALPHA_MAX: 0.2, LINE_W_MIN: 1.0, LINE_W_GAIN: 1.0,
        NODE_R: 3.8, NODE_FILL: 'rgba(20,160,150,1)', NODE_STROKE: 'rgba(255,255,255,0.9)', NODE_STROKE_W: 1.9
      };

      const HALO_R = 14, halo = document.createElement('canvas'); halo.width = halo.height = HALO_R*2;
      { const hctx = halo.getContext('2d'); const g = hctx.createRadialGradient(HALO_R,HALO_R,0,HALO_R,HALO_R,HALO_R);
        g.addColorStop(0,'rgba(72,209,204,0.35)'); g.addColorStop(1,'rgba(72,209,204,0)'); hctx.fillStyle=g;
        hctx.beginPath(); hctx.arc(HALO_R,HALO_R,HALO_R,0,Math.PI*2); hctx.fill(); }

      let cfg = {...BASE};
      let w=0,h=0,dpr=1,N=0,nodes=[];

      function sizeFromHero(){
        const rect = (document.querySelector('main.hero') || canvas).getBoundingClientRect();
        const cw = Math.max(1, Math.floor(rect.width || innerWidth));
        const ch = Math.max(1, Math.floor(rect.height || innerHeight));
        cfg = (cw <= 640) ? {...MOBILE} : {...BASE};
        dpr = Math.min(devicePixelRatio || 1, cfg.DPR_CAP);
        canvas.style.width = cw+'px'; canvas.style.height = ch+'px';
        canvas.width = Math.floor(cw*dpr); canvas.height = Math.floor(ch*dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0); w=cw; h=ch;
        N = Math.max(cfg.MIN_NODES, Math.min(cfg.MAX_NODES, Math.round((w*h)/cfg.DENSITY_DIV)+22));
      }
      function initNetwork(){
        nodes = Array.from({length:N},()=>({x:Math.random()*w, y:Math.random()*h, vx:(Math.random()-0.5)*0.12, vy:(Math.random()-0.5)*0.12 }));
      }
      function drawBg(){
        const bg = ctx.createLinearGradient(0,0,w,h); bg.addColorStop(0,'#eef9f7'); bg.addColorStop(1,'#e3f4f2');
        ctx.fillStyle = bg; ctx.fillRect(0,0,w,h);
      }
      function draw(){
        drawBg();
        for(const n of nodes){
          n.x+=n.vx*cfg.SPEED; n.y+=n.vy*cfg.SPEED;
          if(n.x<-50)n.x=w+50; else if(n.x>w+50)n.x=-50;
          if(n.y<-50)n.y=h+50; else if(n.y>h+50)n.y=-50;
        }
        const maxDist = Math.min(cfg.MAX_DIST_MAX, Math.max(cfg.MAX_DIST_MIN, Math.hypot(w,h)*0.12)), max2=maxDist*maxDist;
        for(let i=0;i<N;i++){ const a=nodes[i];
          for(let j=i+1;j<N;j++){ const b=nodes[j]; const dx=a.x-b.x, dy=a.y-b.y, d2=dx*dx+dy*dy;
            if(d2<max2){ const d=Math.sqrt(d2), t=1-d/maxDist, al=Math.min(cfg.LINE_ALPHA_MAX, 0.10+t*0.22);
              ctx.strokeStyle=`rgba(15,118,110,${al})`; ctx.lineWidth=cfg.LINE_W_MIN+t*cfg.LINE_W_GAIN; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke(); }
          }
        }
        for(const n of nodes) ctx.drawImage(halo, n.x-HALO_R, n.y-HALO_R);
        ctx.lineWidth=cfg.NODE_STROKE_W; ctx.strokeStyle=cfg.NODE_STROKE; ctx.fillStyle=cfg.NODE_FILL;
        for(const n of nodes){ ctx.beginPath(); ctx.arc(n.x,n.y,cfg.NODE_R,0,Math.PI*2); ctx.fill(); ctx.stroke(); }
      }
      function hardResize(){ sizeFromHero(); initNetwork(); drawBg(); }
      let last=0; const FRAME_MS=1000/60;
      function loop(now=performance.now()){
        if (reduceMotion) return;
        requestAnimationFrame(loop);
        if (!isDocVisible || !isHeroVisible) return;
        if(now-last<FRAME_MS*0.9) return;
        last=now; ctx.clearRect(0,0,w,h); draw();
      }
      // Visibility-aware throttling
      let isDocVisible = document.visibilityState !== 'hidden';
      let isHeroVisible = true;

      // Observe hero visibility
      const heroEl = document.querySelector('main.hero') || canvas;
      try {
        const obs = new IntersectionObserver((entries)=>{
          isHeroVisible = entries.some(e=>e.isIntersecting);
        }, { root:null, threshold:0.06 });
        if (heroEl) obs.observe(heroEl);
      } catch(_) { /* noop */ }

      hardResize();
      if (!reduceMotion) requestAnimationFrame(loop);
      addEventListener('resize', hardResize);
      document.addEventListener('visibilitychange', ()=>{
        isDocVisible = (document.visibilityState === 'visible');
        if(isDocVisible) hardResize();
      });
    })();
  </script>
</body>
</html>
